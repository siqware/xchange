(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{RHez:function(e,a,t){"use strict";t.r(a);var s=t("o0o1"),r=t.n(s),i=t("4Xo8"),o=t.n(i),n=t("XuX8"),l=t.n(n),c=t("QBvj"),d=(t("7emp"),t("ksP6")),m=t.n(d),u=(t("Hj/Q"),{name:"addUser",components:{vueDropzone:m.a},data:function(){return{data:{name:"",email:"",password:"",confirm_password:"",profile:"images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},methods:{show:function(){this.$refs.addUser.open()},storeUser:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("storeUser",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.resetField()):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},resetField:function(){this.data={name:"",email:"",password:"",confirm_password:"",profile:"/images/placeholder/placeholder.png"}},successUpload:function(e,a){this.data.profile=a.path}}}),p=t("KHd+"),v=Object(p.a)(u,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("sweet-modal",{ref:"addUser",attrs:{title:"Add User",blocking:!0,width:e.mobilecheck()?"":"60%"}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-3/4"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(a){e.$set(e.data,"name",a)},expression:"data.name"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(a){e.$set(e.data,"email",a)},expression:"data.email"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10",expression:"'min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(a){e.$set(e.data,"password",a)},expression:"data.password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"min:6|max:10|confirmed:password",expression:"'min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(a){e.$set(e.data,"confirm_password",a)},expression:"data.confirm_password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)])]),e._v(" "),t("div",{staticClass:"vx-col md:w-1/4"},[t("label",[e._v("ប្រូហ្វាល")]),e._v(" "),t("vue-dropzone",{ref:"image",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"dropzone",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload}})],1)]),e._v(" "),t("vs-button",{attrs:{slot:"button"},on:{click:e.storeUser},slot:"button"},[e._v("Save")])],1)}),[],!1,null,"d1a550e8",null).exports,f={name:"editUser",components:{vueDropzone:m.a},data:function(){return{data:{name:"",email:"",password:"",confirm_password:"",role:"user",profile:"images/placeholder/placeholder.png"},dropzoneOptions:{url:route("file.upload.thumb"),maxFiles:1,addRemoveLinks:!0,dictDefaultMessage:"ដាក់រូបភាពបើមាន",thumbnailWidth:150,thumbnailHeight:150}}},methods:{show:function(e){this.$refs.editUser.open(),this.data.id=e.id,this.data.name=e.name,this.data.email=e.email,this.data.profile=e.profile,this.data.role=e.role,this.$refs.profile.removeAllFiles(),this.$refs.profile.manuallyAddFile({size:123},this.data.profile)},updateUser:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("updateUser",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))},successUpload:function(e,a){this.data.profile=a.path}}},h=Object(p.a)(f,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("sweet-modal",{ref:"editUser",attrs:{title:"Update User: "+e.data.name,blocking:!0,width:e.mobilecheck()?"":"60%"}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-3/4"},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"w-full",attrs:{"label-placeholder":"ឈ្មោះ",name:"name"},model:{value:e.data.name,callback:function(a){e.$set(e.data,"name",a)},expression:"data.name"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("name")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"w-full",attrs:{"label-placeholder":"អ៊ីម៉ែល",name:"email"},model:{value:e.data.email,callback:function(a){e.$set(e.data,"email",a)},expression:"data.email"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("email")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"role",placeholder:"Please select",options:["admin","super_admin","user","super_user","developer"]},model:{value:e.data.role,callback:function(a){e.$set(e.data,"role",a)},expression:"data.role"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("role"),expression:"errors.has('role')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("role")))])],1)])]),e._v(" "),t("div",{staticClass:"vx-col md:w-1/4"},[t("label",[e._v("ប្រូហ្វាល")]),e._v(" "),t("vue-dropzone",{ref:"profile",staticClass:"max-content p-1",attrs:{duplicateCheck:"",id:"profile",options:e.dropzoneOptions},on:{"vdropzone-success":e.successUpload}})],1)]),e._v(" "),t("vs-button",{attrs:{slot:"button"},on:{click:e.updateUser},slot:"button"},[e._v("Update")])],1)}),[],!1,null,"38b72ddc",null).exports,w={name:"changePasswordUser",data:function(){return{data:{id:null,password:"",confirm_password:"",name:""}}},methods:{show:function(e){this.$refs.changePasswordUser.open(),this.data.id=e.id,this.data.name=e.name},updateUserPassword:function(){var e=this;this.$validator.validateAll().then((function(a){a?(e.$vs.loading(),e.$store.dispatch("updateUserPassword",e.data).then((function(a){a?(e.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ទិន្នន័យបានបន្ថែម",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),e.$emit("finished")):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"ទិន្នន័យមិនបានបន្ថែម",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"}),e.$vs.loading.close()}))):e.$vs.notify({title:"ប្រតិបត្តិការបរាជ័យ",text:"សូមបំពេញទិន្នន័យអោយបានត្រឹមត្រូវ",color:"danger",iconPack:"feather",icon:"icon-message-square",position:"top-center"})}))}}},x=Object(p.a)(w,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("sweet-modal",{ref:"changePasswordUser",attrs:{title:"Change "+e.data.name+"'s Password",blocking:!0,width:e.mobilecheck()?"":"60%"}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10",expression:"'required|min:6|max:10'"}],ref:"password",staticClass:"w-full",attrs:{type:"password","label-placeholder":"ពាក្យសម្ងាត់",name:"password"},model:{value:e.data.password,callback:function(a){e.$set(e.data,"password",a)},expression:"data.password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("password"),expression:"errors.has('password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("password")))])],1),e._v(" "),t("div",{staticClass:"vx-col w-full mt-2"},[t("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:6|max:10|confirmed:password",expression:"'required|min:6|max:10|confirmed:password'"}],staticClass:"w-full",attrs:{type:"password","label-placeholder":"ផ្ទៀងផ្ទាត់ ពាក្យសម្ងាត់",name:"confirm_password"},model:{value:e.data.confirm_password,callback:function(a){e.$set(e.data,"confirm_password",a)},expression:"data.confirm_password"}}),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("confirm_password"),expression:"errors.has('confirm_password')"}],staticClass:"text-danger text-sm"},[e._v(e._s(e.errors.first("confirm_password")))])],1)]),e._v(" "),t("vs-button",{attrs:{slot:"button"},on:{click:e.updateUserPassword},slot:"button"},[e._v("Change")])],1)}),[],!1,null,"0955c486",null).exports;function g(e,a,t,s,r,i,o){try{var n=e[i](o),l=n.value}catch(e){return void t(e)}n.done?a(l):Promise.resolve(l).then(s,r)}function _(e){return function(){var a=this,t=arguments;return new Promise((function(s,r){var i=e.apply(a,t);function o(e){g(i,s,r,o,n,"next",e)}function n(e){g(i,s,r,o,n,"throw",e)}o(void 0)}))}}var b,k=l.a.extend({template:"<vs-chip transparent style=\"height: 10px; margin-top: 10px;\" :color=\"com_method()?'success':'warning'\">\n            {{com_method()?'Active':'Trashed'}}\n        </vs-chip>",methods:{com_method:function(){return this.params.data.status}}}),C=l.a.extend({template:'<vs-chip transparent style="height: 10px; margin-top: 10px;" color="primary">\n            {{com_method()}}\n        </vs-chip>',methods:{com_method:function(){return this.params.data.role}}}),$={name:"User",components:{ChangePasswordUser:x,EditUser:h,AddUser:v,AgGridVue:c.AgGridVue,VueGistEmbed:o.a},data:function(){return{selected:[],gridApi:null,columnDefs:[{headerName:"ID",field:"id",checkboxSelection:!0},{headerName:"Profile",field:"profile",cellRenderer:function(e){return'<img src="'.concat(e.data.profile,'" height="50" alt="').concat(e.data.profile,'">')}},{headerName:"Name",field:"name"},{headerName:"Email",field:"email"},{headerName:"Role",field:"role",cellRendererFramework:C},{headerName:"Status",field:"status",cellRendererFramework:k},{headerName:"Created At",field:"created_at"},{headerName:"Updated At",field:"updated_at"}],defaultColDef:{sortable:!0,resizable:!0,filter:!0}}},methods:{onGridReady:function(e){this.gridApi=e.api},onSelectionChanged:function(){this.selected=this.gridApi.getSelectedRows()},confirmToggle:function(){this.$vs.dialog({type:"confirm",color:"danger",title:"ផ្ទៀងផ្ទាត់",text:"ចុចពាក្យ Accept ដើម្បីបន្ត!",accept:this.toggleUserStatus})},toggleUserStatus:(b=_(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=this).$vs.loading(),t=a.selected.map(function(){var e=_(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.$store.dispatch("toggleUserStatus",t);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e.next=5,Promise.all(t).then((function(){a.$vs.notify({time:4e3,title:"ប្រតិបត្តិការជោគជ័យ",text:"ប្រតិបត្តិការជោគជ័យ",color:"success",iconPack:"feather",icon:"icon-check",position:"top-center"}),a.selected=[],a.$vs.loading.close()}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return b.apply(this,arguments)})},computed:{all_users:function(){return this.$store.getters.all_users}}},U=Object(p.a)($,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("vx-card",{staticClass:"mt-base",attrs:{"code-toggler":""}},[t("div",{staticClass:"vx-row"},[t("div",{staticClass:"vx-col md:w-1/2 w-full"},[t("div",{staticClass:"flex btn-group mb-1"},[t("vs-button",{attrs:{type:"filled","icon-pack":"feather",icon:"icon-plus-square"},on:{click:function(a){return e.$refs.addUser.show()}}},[e._v("\n                    បន្ថែម\n                ")]),e._v(" "),t("vs-button",{attrs:{disabled:!(1===e.selected.length),color:"success",type:"filled","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return e.$refs.editUser.show(e.selected[0])}}},[e._v("\n                    កែប្រែ\n                ")]),e._v(" "),t("vs-button",{attrs:{disabled:!(1===e.selected.length),color:"dark",type:"filled","icon-pack":"feather",icon:"icon-edit"},on:{click:function(a){return e.$refs.changePasswordUser.show(e.selected[0])}}},[e._v("\n                    ប្តូរលេខសម្ងាត់\n                ")])],1)]),e._v(" "),t("div",{staticClass:"vx-col md:w-1/2 w-full"},[t("div",{staticClass:"flex btn-group",class:e.mobilecheck()?"justify-start":"justify-end"},[t("vs-button",{attrs:{disabled:!e.selected.length,color:"danger",type:"filled","icon-pack":"feather",icon:"icon-circle"},on:{click:e.confirmToggle}},[e._v("\n                    Toggle Status\n                ")]),e._v(" "),t("vs-button",{attrs:{disabled:e.selected.length<=0,color:"warning",type:"filled","icon-pack":"feather",icon:"icon-check-square"},on:{click:function(a){return e.gridApi.deselectAll()}}},[e._v("\n                    មិនជ្រើសរើស\n                ")])],1)])]),e._v(" "),t("vs-divider",{staticClass:"mb-0"}),e._v(" "),t("ag-grid-vue",{staticClass:"ag-theme-material w-100 ag-grid-table",attrs:{columnDefs:e.columnDefs,defaultColDef:e.defaultColDef,rowSelection:"multiple",pagination:!0,paginationPageSize:100,animateRows:!0,rowData:e.all_users},on:{"grid-ready":e.onGridReady,"selection-changed":e.onSelectionChanged}}),e._v(" "),t("add-user",{ref:"addUser"}),e._v(" "),t("edit-user",{ref:"editUser",on:{finished:function(a){e.selected=[]}}}),e._v(" "),t("change-password-user",{ref:"changePasswordUser",on:{finished:function(a){e.selected=[]}}}),e._v(" "),t("vue-gist-embed",{attrs:{gistId:"89a5e8ae518d3167a24f7f1f79abe8d2"}}),e._v(" "),t("vue-gist-embed",{attrs:{gistId:"2370294c9e86724cb075bee14746c11a"}})],1)}),[],!1,null,"64658363",null);a.default=U.exports}}]);